<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
fetch('https://drugbank.vn/services/drugbank/api/public/thuoc?size=2000')
    .then(response => response.json())
    .then(json => {
        var userInput =""
        var count = 0
        for (var index = 0; index < 1999; index++) {
            if (json[index].tenThuoc != "" && json[index].tenThuoc != "null" && json[index].baoChe != "" && json[index].baoChe != "null" && json[index].dongGoi != "" && json[index].dongGoi != "null" && json[index].nhomThuoc != "" && json[index].nhomThuoc != "null" && json[index].nongDo != "" && json[index].nongDo != "null" 
            && json[index].phanLoai != "" && json[index].phanLoai != "null" && json[index].taDuoc != "" && json[index].taDuoc != "null" && json[index].congTySx != "" && json[index].congTySx != "null" && json[index].congTySxCode != "" && json[index].congTySxCode != "null" 
            &&json[index].nuocSx != "" && json[index].nuocSx != "null"){
                count ++;
                userInput += json[index].id +"&&" + json[index].tenThuoc + "&&" + json[index].baoChe +"&&"+ json[index].dongGoi +"&&" + json[index].nhomThuoc +"&&" + json[index].nongDo +"&&" + json[index].phanLoai +"&&" + json[index].taDuoc +"&&" + json[index].congTySx +"&&" + json[index].congTySxCode+"&&" + json[index].nuocSx +"\n";       
            }     
        }
        console.log(count)
        var file = new Blob([userInput], { type: "text/plain;charset=utf-8" });
        if (window.navigator.msSaveOrOpenBlob) // IE10+
            window.navigator.msSaveOrOpenBlob(file, "message.txt");
        else { // Others
            var a = document.createElement("a"),
                    url = URL.createObjectURL(file);
            a.href = url;
            a.download = "message.txt";
            document.body.appendChild(a);
            a.click();
            setTimeout(function() {
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);  
            }, 0); 
    }
        
    });

</script>

</html>